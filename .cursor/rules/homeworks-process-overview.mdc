---
description: Homeworks process overview ‚Äî autograding, deadlines, notebooks, tests
alwaysApply: true
---

# Homeworks Process Overview

- **Autograding**: Homeworks are autograded via **GitHub Classrooms**. Each student gets a repo; runs are triggered on push and results feed into grades.

- **Deadlines**: Defined in `checkhw/terraform/functions/grades/index.py` in the `known_homeworks` dict. Each homework has a `deadline` (datetime). Late submissions get penalty days and percent applied to points.

- **Autograding config**: In **checkhw** repo, `.github/classroom/` holds one JSON per homework (e.g. `autograding-activations.json`, `autograding-mlp.json`). Each file has `tests` with `name`, `run` (command), `points`, `timeout`, etc. Max points and check commands come from these files.

- **Notebooks and extraction**: Students solve homeworks in **Jupyter notebooks**. Code is extracted with `checkhw/scripts/extract_class_from_notebook.py` (args: `--notebook`, `--class_definition`, `--out_filename`) and used by tests. **Notebook structure**: each separate task (preliminary or main) must be in a **separate cell** so it can be extracted to a separate file, imported, and tested with pytest.

- **Tests**: The **checkhw** repo has a `tests/` directory; each homework has a subfolder (e.g. `tests/activations/`, `tests/mlp/`, `tests/pytorch-basics/`). Autograding runs these tests (e.g. `pytest tests/activations/test_activations.py`).

- **HW repo URL**: Template is `https://github.com/fintech-dl-hse/hw-<name>`. Repo name = prefix `fintech-dl-hse/hw-` + homework name (e.g. `hw-mlp` ‚Üí `https://github.com/fintech-dl-hse/hw-mlp`).

- **Homework template repo**: All new homeworks **start from** the private template **`fintech-dl-hse/hw-template`**. Do not create homework repos from scratch; use this template (GitHub ‚ÄúUse this template‚Äù or clone and push to a new repo).

- **Workflow runner tags**: In `.github/workflows/classroom.yml`, use explicit runner labels only: **`self-hosted-cpu`** or **`self-hosted-gpu`** (e.g. `runs-on: self-hosted-cpu`). The plain **`self-hosted`** tag is **prohibited**; always use one of the explicit tags above.

---

## Creating a new homework

**Content and notebook (authoring)**

1. **Solve the homework** in a Jupyter notebook (full working solution).
2. **Write tests** that run against the solved notebook (or extracted code); ensure tests **pass**.
3. **Commit** the solved notebook and tests (e.g. in a branch or temp repo).
4. **Prepare the student version**: add preliminary tasks for the main work; **remove working code**; replace with TODOs for students and **documentation** for methods (description and references).
5. **Commit** the student version.
6. **Notebook layout**: ensure notebook cells are **testable** ‚Äî **one task per cell** (preliminary or main). Each such cell can then be extracted to a separate file, imported and tested with pytest. If a later cell (e.g. an optimizer class) needs to `import` something from an earlier cell (e.g. a helper function), add an **injection cell** after the first definition that does `sys.modules["module_name"] = ...` so that the same notebook can run top-to-bottom and the extracted file can still contain `from module_name import ...` for CI.

**Notebook authoring details**

- **Math in markdown**: Use **`$ ... $`** for inline math and **`$$ ... $$`** for display math. Do **not** use `\( \)` or `\[ \]` ‚Äî they do not render in Jupyter.
- **Theory and references**: When describing algorithms, align with official/reference docs (e.g. PyTorch), cite them in the intro and in task cells. Clearly separate the full algorithm (with optional parts) from the simplified ‚Äúin this assignment‚Äù variant. Keep docstrings in code cells consistent (short algorithm summary + link to reference).
- **Student version (step 4)**: Replace full implementations with **docstrings** (algorithm outline and references) and **`raise NotImplementedError("...")`**. Do **not** change function/class names or signatures so extraction and tests keep working.
- **In-notebook tests**: Add a cell that runs the same checks as the checkhw tests (e.g. copy the test logic or import from a test helper) so students can verify in the notebook before pushing. Use the same assertions and tolerances as in `checkhw/tests/<name>/`.

**Theory cells and task cells (readability and self-containment)**

- **Theory cells**: Use short, structured blocks: **Definition** (one clear sentence/formula), **Properties** (bullet list), then a line linking to the algorithm (e.g. "In iteration X we use this for ‚Ä¶"). Avoid long paragraphs; use bullet points and `---` between sections if needed.
- **Task cells**: Make the task **self-contained**. For non-obvious math (e.g. why polar factor = $(X X^T)^{-1/2} X$, what $\lambda$ denotes), add a brief "Why" or "What is ‚Ä¶" subsection in the same cell so students understand from the task description alone. Use bold subsection titles and optional `---` separators. Define or motivate every symbol the algorithm relies on (e.g. $\lambda$ = eigenvalue of $X X^T$).
- **Optional**: Light use of emojis in section headers (e.g. üìê ‚úÖ üéØ) can improve scanability; keep them sparse and consistent.

**Repo and autograding setup**

7. **Create the homework repo** from the template **`fintech-dl-hse/hw-template`**: **Use this template** ‚Üí create `fintech-dl-hse/hw-<name>`, or clone and push. Rename `hw_template.ipynb` ‚Üí `hw_<name>.ipynb`.
8. **Extract and save tests** as separate files into the **checkhw** repo: `checkhw/tests/<name>/` (pytest tests that import and test the extracted modules).
9. **Initialize autograding** in checkhw: add `.github/classroom/autograding-<name>.json` with test commands and points; add the homework and `deadline` in `terraform/functions/grades/index.py` in `known_homeworks`.
10. **Add the GitHub Action check-HW workflow** in the homework repo: in `.github/workflows/classroom.yml` use `fintech-dl-hse/action-checkout-hw@main` (with `autograding-file: autograding-<name>.json`), add **Extract** steps (one per class/definition: `scripts/extract_class_from_notebook.py`), then `education/autograding@v1`. Use `runs-on: self-hosted-cpu` or `self-hosted-gpu` (and `start-gpu-runner.yaml` in the first job if GPU is needed).

**Classroom**

11. **GitHub Classroom**: Create an assignment that uses the new `hw-<name>` repo as the template so each student gets a copy.

See the template repo README for workflow file examples.
